/* ETFormValidation - (c) 2013 Fabio Poloni */
(function($){$.extend($.fn,{etformvalidation:function(t){var n=$.extend({bootstrap:false,dateFormat:"mm/dd/yy",error:"Please fill in the whole form."},t);if(!this.length){console.warn("[ETFormValidation] Nothing selected");return}var r=$(this);r.each(function(){var t=$(this);if(!t.is("form")){console.warn("[ETFormValidation] No form selected.");return}var r=function(t,r){var i=new Array(8,9,27,13,35,36,37,38,39,45,46,48,110,190);if(t.is("input")){switch(t.attr("type")){case"text":{switch(t.attr("data-etfv")){case"":case"simple":if(!r){return t.val().length>0}break;case"number":if(!r){return/^[0-9\.]+$/.test(t.val())}if(r.ctrlKey){return true}if(r.shiftKey&&i.indexOf(r.which)<0){return false}return r.keyCode>=48&&r.keyCode<=57||r.keyCode>=96&&r.keyCode<=105||i.indexOf(r.which)>=0;break;case"date":if(!r){if(t.val().length==0){return false}try{$.datepicker.parseDate(n.dateFormat,t.val())}catch(s){return false}}break;default:if(parseInt(t.attr("data-etfv"))){if(!r){if(t.val().length==0){return false}else if(t.val().length<=parseInt(t.attr("data-etfv"))){return true}}if(i.indexOf(r.which)>=0){return true}if(t.val().length>=parseInt(t.attr("data-etfv"))){return false}}break}}break;case"password":{if(!r){return t.val().length>0}}break;case"radio":case"checkbox":{if(!r){return $("input[type="+t.attr("type")+"][name="+t.attr("name")+"]:checked").size()>0}}break;default:break}}else if(t.is("textarea")||t.is("select")){if(!r){if(t.val().length==0){return false}}}return true};t.find("input[data-etfv],select[data-etfv],textarea[data-etfv]").each(function(){var t=function(){var t=$(this);var i=r(t,null);if(n.bootstrap){if(t.parents(".control-group").hasClass("success")){t.parents(".control-group").removeClass("success")}if(t.parents(".control-group").hasClass("error")){t.parents(".control-group").removeClass("error")}if(i){t.parents(".control-group").addClass("success")}else{t.parents(".control-group").addClass("error")}}else{t.parents(".controls").find("span.etfv-result").remove();if(i){t.parents(".controls").append('<span class="etfv-result"> &#x2714;</span>')}else{t.parents(".controls").append('<span class="etfv-result"> &#x2718;</span>')}}};$(this).keydown(function(t){return r($(this),t)}).keyup(t).change(t)});t.submit(function(){var i=true;t.find("input[data-etfv],select[data-etfv],textarea[data-etfv]").each(function(){if(!r($(this),null)){i=false}});if(!i){if(n.bootstrap){t.prepend('<div class="alert alert-error">'+n.error+"</div>")}else{alert(n.error)}}return i})});return r}})})(jQuery)
